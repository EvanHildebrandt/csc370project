<!DOCTYPE html>
<html>
<head>
    <!-- Standard Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

    <!-- Site Properties -->
    <title>Homepage - Semantic</title>
    <link rel="stylesheet" type="text/css" href="/static/semantic.min.css">
    <link rel="stylesheet" type="text/css" href="/static/layout.css">
    <link rel="stylesheet" type="text/css" href="/static/custom.css">

    <script src="/static/jquery-2.2.4.js"></script>
    <script src="/static/semantic.js"></script>
    <script>
    $(document)
    .ready(function() {

        // fix menu when passed
        $('.masthead')
        .visibility({
            once: false,
            onBottomPassed: function() {
                $('.fixed.menu').transition('fade in');
            },
            onBottomPassedReverse: function() {
                $('.fixed.menu').transition('fade out');
            }
        });

        // create sidebar and attach to menu open
        $('.ui.sidebar')
        .sidebar('attach events', '.toc.item');

        $('.ui.dropdown').dropdown();

        function change_subscription(subscribe){
          var data = {};
          data['subscribe'] = subscribe;
          data['subsaiddit_id'] = 1;

          $.ajax({
            type : "POST",
            url : "/changesubscription",
            data: JSON.stringify(data, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {
                alert("Subscription Updated");
                location.reload();
            }
          });
        };

        function vote(updown, postid, commentid){
          var data = {};
          data['postid'] = postid;
          data['commentid'] = commentid;
          data['updown'] = updown;

          $.ajax({
            type : "POST",
            url : "/vote",
            data: JSON.stringify(data, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {
                alert(result);
            }
          });
        };

        function deletepost(postid){
          var data = {};
          data['postid'] = postid;

          $.ajax({
            type : "POST",
            url : "/deletepost",
            data: JSON.stringify(data, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {
                alert(result);
                window.location.href = "/";
            },
            error: function(result) {
              alert(result.responseText);
            }
          });
        };

        function favouritepost(postid){
          var data = {};
          data['postid'] = postid;

          $.ajax({
            type : "POST",
            url : "/favouritepost",
            data: JSON.stringify(data, null, '\t'),
            contentType: 'application/json;charset=UTF-8',
            success: function(result) {
                alert(result);
            },
            error: function(result) {
              alert(result.responseText);
            }
          });
        };
    });
    </script>
</head>
<body>

    <!-- Following Menu -->
    <div class="ui large top fixed hidden menu">
        <div class="ui container">
            <div class="right menu">
                <div class="item">
                    <a class="ui button">Log in</a>
                </div>
                <div class="item">
                    <a class="ui primary button" href="/register">Sign Up</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Menu -->
    <div class="ui vertical sidebar menu">
        <a class="active item">Home</a>
        <a href="/login" class="item">Login</a>
        <a href="/register" class="item">Signup</a>
        {% for subsaiddit in subsaiddits %}
          {{ subsaiddit }}
        {% endfor %}
    </div>


    <!-- Page Contents -->
    <div class="pusher">
        <div class="ui vertical masthead segment">
            <div class="ui container">
                <div class="ui large secondary pointing menu">
                    <a class="toc item">
                        <img class="side bar hamburger-icon" src="/static/images/hamburger-icon.png" alt="" />
                    </a>
                    <img class="palm-tree-icon" src="/static/images/palm-tree-icon.png" alt="" />
                    <a href="/" class="logotype">s&#8195;a&#8195;i&#8195;d&#8195;d&#8195;i&#8195;t</a>
                    <div class="right item">
                        <div class="ui basic buttons">
                            {% if loggedIn %}
                            <div class="ui button"><a href="/logout">Logout</a></div>
                            {% else %}
                            <div class="ui button"><a href="/login">Log in</a></div>
                            <div class="ui button"><a href="/register">Sign up</a></div>
                            {% endif %}
                        </div>
                        <div class="ui compact selection dropdown">
                          <i class="dropdown icon"></i>
                          <div class="text">Subsaiddits</div>
                          <div class="menu">
                            {% for subsaiddit in subsaiddits %}
                              <div class="item">
                                <a href="/s/{{ subsaiddit.subsaiddit_title }}">
                                  {{ subsaiddit.subsaiddit_title }}
                                </a>
                              </div>
                            {% endfor %}
                          </div>
                        </div>
                    </div>
                </div>
            </div>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                <ul class=flashes>
                  {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                  {% endfor %}
                </ul>
              {% endif %}
            {% endwith %}
            {% block body %}{% endblock %}
        </div>

        <footer>
            <div class="ui container">
                <span class="footer-year" >2016 - ??</span>
                <a class="link-underline" target="_blank" href="http://poop.bike">inspired by</a>
            </div>
        </footer>
    </div>
</body>

</html>
