{% extends "layout.html" %}
{% block body %}
<script type = "text/javascript" language = "javascript">
  function vote(updown, postid, commentid){
    var data = {};
    data['postid'] = postid;
    // Instead of using a null commentid for a vote on a post and not a comment,
    // use -1, so we can keep the unique property on votes on posts
    data['commentid'] = commentid;
    data['updown'] = updown;

    $.ajax({
      type : "POST",
      url : "/vote",
      data: JSON.stringify(data, null, '\t'),
      contentType: 'application/json;charset=UTF-8',
      success: function(result) {
          alert(result);
      }
    });
  };
</script>
<div class="ui text container">
  <h1 class="ui inverted header">
    {{ subsaiddit }}
    <hr>
    {% for post in posts %}
      {{ post }}
      <input type=button value=Upvote onclick="vote(true, '{{ post.id }}', -1)">
      <input type=button value=Downvote onclick="vote(false, '{{ post.id }}', -1)">
    {% endfor %}
  </h1>
</div>
  {% from "_formhelpers.html" import render_field %}

  <form method=post action="/s/{{ subsaiddit.subsaiddit_title }}">
  <dl>
    {{ render_field(form.title) }}
    {{ render_field(form.text) }}
  </dl>
  <p><input type=submit value=Post>
  </form>
{% endblock %}
